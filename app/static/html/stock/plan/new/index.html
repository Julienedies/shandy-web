<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>新建交易计划</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<link rel="stylesheet" href="/public/static/css/basic/0.7/basic.css" />
<link rel="stylesheet" href="/public/static/css/js/vendor/brick/0.8/css/brick.mobile.css" />
<link rel="stylesheet" href="/public/static/css/vendor/bulma/css/bulma.css" />
<link rel="stylesheet" href="/public/static/css/common/common.css" />
    <link rel="stylesheet" href="/public/static/css/html/stock/plan/new/style.css">
</head>
<body>
<div class="tabs is-medium is-boxed" id="nav-tabs">
    <ul>
        <li class="is-active"><a href="/public/static/html/stock/zold/index.html">stock</a></li>
        <li><a href="/public/static/html/stock/zold/logic.html">logic</a></li>
        <li><a href="/public/static/html/stock/system/index.html">system</a></li>
        <li><a href="/public/static/html/stock/plan/new/">新计划</a></li>
        <!--<li><a href="/public/static/html/stock/logic/new.html">新逻辑</a></li>-->
        <li><a href="/public/static/html/stock/logic/index.html">逻辑</a></li>
        <li><a href="/public/static/html/stock/mistake/">错误</a></li>
        <li><a href="/public/static/html/stock/plan/buy/">建仓计划</a></li>
        <li><a href="/public/static/html/stock/plan/sell/">平仓预案</a></li>
        <li><a href="/public/static/html/stock/replay/index.html">复盘</a></li>
        <li><a href="/public/static/html/stock/plan/index/">计划预案</a></li>
    </ul>
</div>




<div class="container">

    <section ic-ctrl="set_plan_ctrl">

    <div ic-form="plan" ic-tpl ic-tpl-init="{}" ic-init="model=model[0]||model">

        <div class="table_0">
            <!-- tr -->
            <div>
                <h6>计划类型</h6>
                <div>
                    <div class="control">
                        <label class="radio is-medium">
                            <input type="radio" name="type" value="平仓预案" ic-has-checked="model.type!='建仓计划'" ic-form-field>
                            平仓预案
                        </label>
                        <label class="radio">
                            <input type="radio" name="type" value="建仓计划" ic-has-checked="model.type=='建仓计划'">
                            建仓计划
                        </label>
                    </div>
                </div>
            </div>
            <!-- tr -->
            <div>
                <h6>股票名称</h6>
                <div>
                    <div class="control">
                        <input class="input is-medium" type="text" name="股票名称" value="{{model['股票名称']}}" ic-form-field ic-field-rule="required">
                        <input type="hidden" name="id" value="{{model.id}}" ic-form-field>
                    </div>
                </div>
            </div>
            <!-- tr -->
            <div>
                <h6>行情性质</h6>
                <div>
                     <input class="input is-medium" type="text" name="行情性质" value="{{model['行情性质']}}" ic-form-field>
                </div>
            </div>
            <!--<div>
                <h6>节点</h6>
                <div>
                    <div class="field">
                        <input class="input is-medium"
                               type="text"
                               name="K线节点"
                               ic-form-field="K线节点"
                               ic-ajax
                               ic-submit-action="/stock/tags"
                               ic-submit-before="tags.add.before"
                               ic-submit-on-done="tags.add.done"
                                />
                    </div>
                    <div class="field is-grouped is-grouped-multiline" ic-select="K线节点" ic-select-item=">div>div>span">
                        <div class="control" ic-for="i,v in ['启动', '突破', '支撑']">
                            <div class="tags has-addons">
                                <span ic-class="tag is-medium" ic-val="{{v}}">{{v}}</span>
                                <a class="tag is-delete is-medium"
                                   ic-ajax-x
                                   ic-submit-method="delete"
                                   ic-submit-action="/stock/tags/{{v.id}}"
                                   ic-submit-before="tags.remove.before"
                                   ic-submit-on-done="tags.remove.done"
                                        ></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>-->
            <!-- tr -->
            <div>
                <h6>建仓条件</h6>
                <div>
                    <div class="tags" ic-select="条件" ic-select-type="checkbox">
                            <span class="tag is-medium" ic-for="i,v in ['是否主线','是否风口','是否龙头','强弱','确定性','风险','预期收益', '节点']" ic-val="{{v}}">
                                {{v}}
                            </span>
                    </div>
                </div>
            </div>
            <!-- tr -->
            <div>
                <h6>计划预案</h6>
                <div>
                    <textarea rows="7" class="textarea is-medium" ic-form-field="计划">{{model['计划']}}</textarea>
                </div>
            </div>
            <!-- tr -->
            <div>
                <h6></h6>
                <div>
                    <div class="buttons">
                        <button class="button is-primary"
                                ic-form-submit="plan"
                                ic-submit-action="/stock/plan"
                                ic-submit-before="submit"
                                ic-submit-on-done="done"
                                >保存</button>
                        <button class="button" ic-click="reset" style="margin-left:4em;"> 重置 </button>
                        <button class="button" ic-click="close" style="margin-left:4em;"> 关闭 </button>
                    </div>
                </div>
            </div>
            <!-- tr -->
            <div>
                <h6></h6>
                <div>

                </div>
            </div>
        </div>

    </div>

</section>

</div>

<script src="/public/static/js/vendor/underscore-1.8.2.js"></script>
<script src="/public/static/js/vendor/jquery-2.1.3.js"></script>
<script src="/public/static/js/vendor/brick/0.8/brick.mobile.js"></script>
<script src="/public/static/js/common.js"></script>
<script src="/public/static/js/html/stock/plan/new/main.js"></script>
<script>/**
 * Created by j on 18/7/22.
 */

brick.controllers.reg('plansCtrl', function(){

    var scope = this;
    var model = {};

    this.done = function(data){
        console.info(data);
        model = data;
        scope.render('plans', data);
        $(this).remove();
    };

    scope.edit = function(){
        let id = $(this).data('id');
        scope.emit('edit', model[id]);
    };

    scope.remove = function(){
        $(this).closest('li').remove();
    };

    scope.$elm.find('[ic-ajax=plans]').icAjax();

});</script>
<script type="text/javascript" charset="utf-8" src="http://192.168.3.48:8132/livereload.js"></script></body>
</html>